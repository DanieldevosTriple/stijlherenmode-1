{% comment %}
  Renders facets (filtering and sorting)

  Accepts:
  - results: {Object} Collection or Search object
  - enable_filtering: {Boolean} Show filtering when true
  - enable_sorting: {Boolean} Show sorting when true
  - filter_type: {String} Type of filter
  - paginate: {Object}

  Usage:
  {% render 'facets', results: collection, enable_filtering: true, enable_sorting: true, filter_type: 'vertical', paginate: paginate %}
{% endcomment %}

{{ 'component-show-more.css' | asset_url | stylesheet_tag }}
{{ 'component-swatch-input.css' | asset_url | stylesheet_tag }}
{{ 'component-swatch.css' | asset_url | stylesheet_tag }}

<div class="facets-container-horizontal" style="display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #444; border-bottom: 1px solid #444; padding: 10px 0;">
  <div class="facets__filters" style="display: flex; gap: 20px;">
    {%- for filter in results.filters -%}
      <details class="facets__disclosure" style="position: relative;">
        <summary style="cursor: pointer; text-transform: uppercase; font-weight: bold; color: #fff;">
          {{ filter.label | escape }}
          <span style="margin-left: 5px;">+</span>
        </summary>
        <div class="facets__options" style="position: absolute; top: 100%; left: 0; background-color: #333; padding: 10px; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); z-index: 10;">
          <fieldset>
            <ul style="list-style: none; margin: 0; padding: 0;">
              {%- for value in filter.values -%}
                <li style="margin-bottom: 5px;">
                  <label style="display: flex; align-items: center; gap: 10px; color: #fff;">
                    <input type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" {% if value.active %}checked{% endif %}>
                    {{ value.label | escape }} ({{ value.count }})
                  </label>
                </li>
              {%- endfor -%}
            </ul>
          </fieldset>
        </div>
      </details>
    {%- endfor -%}
  </div>
  <div class="facets__sorting" style="text-transform: uppercase; font-weight: bold; color: #fff;">
    <label for="SortBy" style="margin-right: 10px;">Sort By</label>
    <select id="SortBy" name="sort_by" style="background-color: #333; color: #fff; border: 1px solid #444; padding: 5px;">
      {%- for option in results.sort_options -%}
        <option value="{{ option.value | escape }}" {% if option.value == results.sort_by %}selected{% endif %}>
          {{ option.name | escape }}
        </option>
      {%- endfor -%}
    </select>
  </div>
</div>

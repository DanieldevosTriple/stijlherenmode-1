{% schema %}
{
  "name": "Popular Now",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Wat is trending"
    },
    {
      "type": "text",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Ontdek de populairste items van dit moment"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Afbeelding"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Titel",
          "default": "Productnaam"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Popular now",
      "blocks": [
        {
          "type": "item",
          "settings": {
            "image": "",
            "title": "Product 1",
            "url": "#"
          }
        },
        {
          "type": "item",
          "settings": {
            "image": "",
            "title": "Product 2",
            "url": "#"
          }
        }
      ],
      "settings": {
        "section_title": "Popular Now",
        "section_subtitle": "Check out our trending items"
      }
    }
  ]
}
{% endschema %}

<section class="popular-now-section py-5">
    <div class="container">
      <div class="text-center mb-4">
        <h2>{{ section.settings.section_title }}</h2>
        <p>{{ section.settings.section_subtitle }}</p>
      </div>
      {% assign block_count = section.blocks | size %}
      {% if block_count > 0 %}
        {% comment %}
          Bepaal dynamisch de kolombreedte op basis van aantal blocks:
          - 1 block: col-12 (volle breedte)
          - 2 blocks: col-6
          - 3 blocks: col-4
          - 4 blocks: col-3
        {% endcomment %}
        {% case block_count %}
          {% when 1 %}
            {% assign col_class = "col-12 col-md-12 col-lg-12" %}
          {% when 2 %}
            {% assign col_class = "col-12 col-md-6 col-lg-6" %}
          {% when 3 %}
            {% assign col_class = "col-12 col-md-4 col-lg-4" %}
          {% when 4 %}
            {% assign col_class = "col-12 col-md-3 col-lg-3" %}
          {% else %}
            {% assign col_class = "col-12" %}
        {% endcase %}
  
        <div class="row">
          {% for block in section.blocks %}
            {% assign image = block.settings.image %}
            {% assign title = block.settings.title %}
            {% assign url = block.settings.url %}
            {% if image and title and url %}
              <div class="{{ col_class }} mb-4">
                <a href="{{ url | escape }}" class="text-decoration-none">
                  <div class="card h-100 border-0">
                    <img src="{{ image | file_url | replace: 'files/files', 'files' }}" alt="{{ title | escape }}" class="card-img-top">
                    <div class="card-body text-center">
                      <h5 class="card-title">{{ title }}</h5>
                    </div>
                  </div>
                </a>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </section>
  
  <style>
  .popular-now-section img {
    object-fit: cover;
    height: 200px;
  }
  .popular-now-section .card {
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .popular-now-section .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }
  </style>
  
  

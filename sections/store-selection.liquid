{{ 'store-selection.css' | asset_url | stylesheet_tag }}

<section class="store-selector page-width">
  <div class="grid">
    <!-- Left: Title and Vertical Menu -->
    <div class="grid__item medium-up--one-third store-selector__menu">
      <h2 class="store-selector__title">{{ section.settings.title }}</h2>
      <ul class="store-selector__list">
        {% for block in section.blocks %}
        <li class="store-selector__item {% if forloop.first %}active{% endif %}" data-image="{{ block.settings.image | file_url }}">
          {{ block.settings.title }}
        </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Right: Image and Message -->
    <div class="grid__item medium-up--two-thirds store-selector__content">
      <div class="store-selector__image-container">
        {% if section.blocks.size > 0 %}
        <img class="store-selector__image" src="{{ section.blocks[0].settings.image | file_url }}" alt="Store Image">
        {% endif %}
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const items = document.querySelectorAll('.store-selector__item');
  const image = document.querySelector('.store-selector__image');

  if (items.length > 0) {
    // Set the first item's image as default and active
    const firstImage = items[0].getAttribute('data-image');
    if (firstImage) {
      image.src = firstImage;
      items[0].classList.add('active');
    }

    items.forEach((item, index) => {
      item.addEventListener('mouseover', () => {
        const hoverImage = item.getAttribute('data-image');
        if (hoverImage) {
          image.src = hoverImage;

          // Update active state
          items.forEach(i => i.classList.remove('active'));
          item.classList.add('active');
        }
      });

      item.addEventListener('mouseout', () => {
        // Reset to the first item's image and active state
        const firstItemImage = items[0].getAttribute('data-image');
        if (firstItemImage && !document.querySelector('.store-selector__item:hover')) {
          image.src = firstItemImage;
          items.forEach(i => i.classList.remove('active'));
          items[0].classList.add('active');
        }
      });
    });
  }
});
</script>

{% schema %}
{
  "name": "Store Selection",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Onze winkels"
    }
  ],
  "blocks": [
    {
      "type": "menu_item",
      "name": "Menu Item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Amsterdam"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Store Selection",
      "category": "Custom"
    }
  ]
}
{% endschema %}
